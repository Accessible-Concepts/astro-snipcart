---
import { Element, SnipcartProduct, buildAttributes } from '@lloydjatkinson/astro-snipcart';

export type Style = {
    readonly name: string;
    readonly hex: string;
};

export type Props = Element & SnipcartProduct & {
    styles: readonly Style[];
};

const {
    as: Element = 'div',
    id,
    name,
    price,
    url,
    description,
    image,
    categories = [],
    metadata,
    fileGuid,
    quantity,
    minimumQuantity,
    maximumQuantity,
    quantityStep,
    dimensions,
    customFields = [],
    stackable,
    shippable,
    taxable,
    taxes,
    hasTaxesIncluded,
    styles,
} = Astro.props as Props;

const attributes = buildAttributes({
    id,
    name,
    price,
    url,
    description,
    image,
    categories,
    metadata,
    fileGuid,
    quantity,
    minimumQuantity,
    maximumQuantity,
    quantityStep,
    dimensions,
    customFields,
    stackable,
    shippable,
    taxable,
    taxes,
    hasTaxesIncluded,
});
---
<script is:inline>
const colours = (values) => {
    return 1
};
</script>

<span x-data=`{ colours: ${JSON.stringify(styles)} }`>
    <Element
        x-dat
        class="snipcart-add-item"
        { ...attributes }>
        <slot />
    </Element>
</span>